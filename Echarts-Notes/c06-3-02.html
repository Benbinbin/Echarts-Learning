<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3.2 å…³ç³»å›¾</title>
  <script src="js/echarts.js"></script>
  <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="https://benbinbin.github.io/Echarts-Learning">Echarts Learning</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item ml-lg-2"><a href="https://github.com/Benbinbin/Echarts-Learning"><svg height="100%"
                viewBox="0 0 16 16" version="1.1" width="30">
                <path fill-rule="evenodd"
                  d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                </path>
              </svg></a></li>
        </ul>
      </div>
    </nav>
  </header>

  <aside>
    <div class="top">
      <a href="#" target="_self">&lt; top</a>
    </div>
  </aside>

  <article class="container">
    <h1>å…³ç³»å›¾</h1>
    <hr>
    <h2>åŸºç¡€å¸ƒå±€</h2>
    <p>åŸºäºèŠ‚ç‚¹æ•°æ®ä¸­æä¾›çš„ <code>(x, y)</code> ä½œä¸ºèŠ‚ç‚¹çš„ä½ç½®ã€‚ä½¿ç”¨æ¨¡æ¿ï¼ˆç›®å½• c06-3-02-templateï¼‰å¤„ç†æ•°æ®ã€‚</p>

    <ol>
      <li>å‚è€ƒ <code>GEPHI_nodeæ¨¡æ¿.csv</code> å’Œ <code>GEPHI_edgeæ¨¡æ¿.csv</code> æ–‡æ¡£æ ¼å¼ï¼Œå‡†å¤‡ nodes å’Œ edges æ•°æ®ï¼Œå¯¼å…¥è½¯ä»¶ Gephi
        å¤„ç†æ•°æ®ç”Ÿæˆç½‘ç»œå›¾ã€‚ç„¶åå¯¼å‡ºç»“æœä¸º <code>.gdf</code> æ ¼å¼çš„æ–‡æ¡£ï¼Œå°†æ–‡æ¡£æ ¼å¼ï¼ˆåç¼€ï¼‰ç›´æ¥ä¿®æ”¹ä¸º <code>.csv</code>ï¼Œè·å¾—æ¯ä¸ªèŠ‚ç‚¹çš„åæ ‡ <code>(x, y)</code> ä½ç½®ä¿¡æ¯ã€‚
        <img src="images/gephi_node_edge.png" alt="">
        <img src="images/gephi_layout.png" alt="">
        <img src="images/gephi_export.png" alt="">
        <p>ğŸ’¡ å¦‚æœä½¿ç”¨ Excel æ‰“å¼€æ–‡ä»¶ä¸­æ–‡å‡ºç°ä¹±ç æƒ…å†µï¼Œå¯ä»¥å…ˆå°†æ–‡ä»¶ç¼–ç æ¨¡å¼è½¬æ¢ä¸º UTF-8ã€‚</p>
        <img src="images/gephi_node_location.png" alt="">
      </li>
      <li>ä½¿ç”¨ ECharts çš„åœ¨çº¿<a href="https://echarts.apache.org/zh/spreadsheet.html">è¡¨æ ¼å·¥å…·</a>å¤„ç†æ•°æ®ç”Ÿæˆç›¸åº”çš„å¯¹è±¡æ•°ç»„ã€‚
        <img src="images/Echarts_node.png" alt="">
        <img src="images/Echarts_edge.png" alt="">
      </li>

    </ol>
    <div id="baseLayout" style="height:600px"></div>

    <script>
      // åŸºäºå‡†å¤‡å¥½çš„ DOM åˆå§‹åŒ– Echarts å®ä¾‹
      let baseLayout = echarts.init(document.getElementById('baseLayout'));

      // æ•°æ®
      // ç‚¹æ•°æ®
      let nodes = [
        { name: 'äº§å“çº¿1', category: 3, value: 200, symbolSize: 200, x: -100.58678, y: -480.31647 },
        { name: 'äº§å“çº¿2', category: 3, value: 150, symbolSize: 150, x: 459.21088, y: 154.88875 },
        { name: 'äº§å“çº¿3', category: 3, value: 300, symbolSize: 300, x: -469.039, y: 96.30452 },
        { name: 'å°æ˜', category: 0, value: 30, symbolSize: 30, x: -382.62384, y: 333.47617 },
        { name: 'å°ç‹', category: 0, value: 30, symbolSize: 30, x: 213.65831, y: -41.194584 },
        { name: 'å°å¼ ', category: 0, value: 20, symbolSize: 20, x: 498.59616, y: -101.51162 },
        { name: 'å°æ', category: 1, value: 10, symbolSize: 10, x: -156.9808, y: 462.80737 },
        { name: 'å°çº¢', category: 2, value: 50, symbolSize: 50, x: -327.6817, y: -372.09183 },
        { name: 'Jone', category: 0, value: 25, symbolSize: 25, x: 364.49747, y: -323.00238 },
        { name: 'White', category: 0, value: 25, symbolSize: 25, x: 162.61665, y: -478.50836 },
        { name: 'Jack', category: 2, value: 60, symbolSize: 60, x: -197.03816, y: -95.19627 },
        { name: 'Jeo', category: 1, value: 20, symbolSize: 20, x: -144.80696, y: 156.86377 },
        { name: 'å¼ ä¸‰', category: 2, value: 50, symbolSize: 50, x: 28.357155, y: -215.72456 },
        { name: 'æå››', category: 1, value: 15, symbolSize: 15, x: 107.321556, y: 193.45903 },
        { name: 'ç‹äº”', category: 1, value: 15, symbolSize: 15, x: -483.11234, y: -158.15852 },
        { name: 'é»„äºŒ', category: 0, value: 40, symbolSize: 40, x: 93.62859, y: 490.78433 },
        { name: 'èƒ¡ä¸€', category: 0, value: 40, symbolSize: 40, x: 333.98282, y: 377.1208 }
      ];

      // è¾¹æ•°æ®
      let edges = [
        { source: 'äº§å“çº¿1', target: 'å°æ˜' },
        { source: 'äº§å“çº¿1', target: 'å°ç‹' },
        { source: 'äº§å“çº¿1', target: 'å°å¼ ' },
        { source: 'äº§å“çº¿1', target: 'å°æ' },
        { source: 'äº§å“çº¿1', target: 'å°çº¢' },
        { source: 'äº§å“çº¿2', target: 'Jone' },
        { source: 'äº§å“çº¿2', target: 'White' },
        { source: 'äº§å“çº¿2', target: 'Jack' },
        { source: 'äº§å“çº¿2', target: 'Jeo' },
        { source: 'äº§å“çº¿3', target: 'å¼ ä¸‰' },
        { source: 'äº§å“çº¿3', target: 'æå››' },
        { source: 'äº§å“çº¿3', target: 'ç‹äº”' },
        { source: 'äº§å“çº¿3', target: 'é»„äºŒ' },
        { source: 'äº§å“çº¿3', target: 'èƒ¡ä¸€' }
      ];

      // åˆ†ç±»æ•°æ®
      let categories = [
        { name: 'è¥é”€ç»„' },
        { name: 'è¿è¥ç»„' },
        { name: 'æŠ€æœ¯ç»„' },
        { name: 'äº§å“' }
      ];

      // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®
      option = {
        title: {
          text: 'åŸºç¡€å¸ƒå±€',
        },
        tooltip: {},
        legend: {
          top: '5%',
          left: '1%'
        },
        animationDuration: 1500,   // åˆå§‹åŠ¨ç”»çš„æ—¶é•¿
        animationEasingUpdate: 'quinticInOut',   // æ•°æ®æ›´æ–°åŠ¨ç”»çš„ç¼“åŠ¨æ•ˆæœ
        series:
        {
          type: 'graph',   // å…³ç³»å›¾æ•°æ®ç±»å‹
          layout: 'none',   // å…³ç³»å›¾å¸ƒå±€æ–¹å¼ï¼Œ'none' ä¸é‡‡ç”¨ä»»ä½•å¸ƒå±€ï¼Œä½¿ç”¨èŠ‚ç‚¹ä¸­æä¾›çš„ xï¼Œ y ä½œä¸ºèŠ‚ç‚¹çš„ä½ç½®
          data: nodes,   // å…³ç³»å›¾çš„èŠ‚ç‚¹æ•°æ®åˆ—è¡¨ã€‚èŠ‚ç‚¹çš„ name ä¸èƒ½é‡å¤
          links: edges,   // èŠ‚ç‚¹é—´çš„å…³ç³»æ•°æ®
          categories: categories,   // èŠ‚ç‚¹åˆ†ç±»çš„ç±»ç›®ï¼Œç±»ç›®çš„æ ·å¼ä¼šè¢«åº”ç”¨åˆ°èŠ‚ç‚¹æ ·å¼ã€‚å›¾ä¾‹ä¹Ÿå¯ä»¥åŸºäº categories åå­—å±•ç°å’Œç­›é€‰
          roam: true,   // æ˜¯å¦å¼€å¯é¼ æ ‡ç¼©æ”¾å’Œå¹³ç§»æ¼«æ¸¸
          focusNodeAdjacency: true,   // æ˜¯å¦åœ¨é¼ æ ‡ç§»åˆ°èŠ‚ç‚¹ä¸Šçš„æ—¶å€™çªå‡ºæ˜¾ç¤ºèŠ‚ç‚¹ä»¥åŠèŠ‚ç‚¹çš„è¾¹å’Œé‚»æ¥èŠ‚ç‚¹
          itemStyle: {
            borderColor: '#fff',
            borderWidth: 1,
            shadowBlur: 10,
            shadowColor: 'rgba(0, 0, 0, 0.3)',
          },
          label: {
            position: 'inside',
            color: 'white',
            formatter: '{b}'
          },
          // è¿çº¿çš„æ ·å¼
          lineStyle: {
            color: 'source',
            curveness: 0.2
          },
          emphasis: {
            lineStyle: {
              width: 10
            }
          }
        }
      }
      // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨
      baseLayout.setOption(option);
    </script>

    <h2>ç¯å½¢å¸ƒå±€</h2>
    <p>Chord Diagram å’Œå¼¦å›¾æ˜¯æ˜¾ç¤ºæ•°æ®ä¹‹é—´çš„ç›¸äº’å…³ç³»çš„å›¾å½¢æ–¹æ³•ã€‚</p>
    <p>åŸºäºåŸºæœ¬å¸ƒå±€çš„æ•°æ®ï¼Œåªéœ€è¦å°†èŠ‚ç‚¹å¸ƒå±€æ–¹å¼ <code>layout</code> ä¿®æ”¹ä¸º <code>'circular'</code>ã€‚</p>

    <div id="circularLayout" style="height:600px"></div>

    <script>
      // åŸºäºå‡†å¤‡å¥½çš„ DOM åˆå§‹åŒ– Echarts å®ä¾‹
      let circularLayout = echarts.init(document.getElementById('circularLayout'));
      // æ•°æ®ä½¿ç”¨ç¬¬ä¸€ä¸ªå®ä¾‹
      // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®
      // å…¶ä»–å±æ€§è®¾ç½®ä¸å®ä¾‹ä¸€ç›¸åŒï¼Œåªæ˜¯ä¿®æ”¹äº† layout å±æ€§
      circularOption = {
        title: {
          text: 'åŸºç¡€å¸ƒå±€',
        },
        tooltip: {},
        legend: {
          top: '5%',
          left: '1%'
        },
        animationDuration: 1500,
        animationEasingUpdate: 'quinticInOut',
        series:
        {
          type: 'graph',
          layout: 'circular',   // 'circular' é‡‡ç”¨ç¯å½¢å¸ƒå±€
          data: nodes,
          links: edges,
          categories: categories,
          roam: true,
          focusNodeAdjacency: true,
          itemStyle: {
            borderColor: '#fff',
            borderWidth: 1,
            shadowBlur: 10,
            shadowColor: 'rgba(0, 0, 0, 0.3)',
          },
          label: {
            position: 'inside',
            color: 'white',
            formatter: '{b}'
          },
          lineStyle: {
            color: 'source',
            curveness: 0.2
          },
          emphasis: {
            lineStyle: {
              width: 10
            }
          }
        }
      }

      // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨
      circularLayout.setOption(circularOption);
    </script>

    <h2>åŠ›å¼•å¯¼å¸ƒå±€</h2>
    <p>Force Layout é‡‡ç”¨åŠ›å¼•å¯¼æ„å»ºèŠ‚ç‚¹çš„å¸ƒå±€ã€‚</p>
    <p>åŸºäºåŸºæœ¬å¸ƒå±€çš„æ•°æ®ï¼Œåªéœ€è¦å°†èŠ‚ç‚¹å¸ƒå±€æ–¹å¼ <code>layout</code> ä¿®æ”¹ä¸º <code>'force'</code>ã€‚</p>

    <div id="forceLayout" style="height:800px;margin-bottom: 50px"></div>

    <script>
      // åŸºäºå‡†å¤‡å¥½çš„ DOM åˆå§‹åŒ– Echarts å®ä¾‹
      let forceLayout = echarts.init(document.getElementById('forceLayout'));
      // æ•°æ®ä½¿ç”¨ç¬¬ä¸€ä¸ªå®ä¾‹
      // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®
      // å¤§éƒ¨åˆ†å±æ€§è®¾ç½®ä¸å®ä¾‹ä¸€ç›¸åŒï¼Œåªæ˜¯ä¿®æ”¹äº† layout å±æ€§å’Œä¸åŠ›å¸ƒå±€ç›¸å…³çš„å±æ€§ force å‚æ•°
      forceOption = {
        title: {
          text: 'åŸºç¡€å¸ƒå±€',
        },
        tooltip: {},
        legend: {
          top: '5%',
          left: '1%'
        },
        animationDuration: 1500,
        animationEasingUpdate: 'quinticInOut',
        series:
        {
          type: 'graph',
          layout: 'force',   // 'force' é‡‡ç”¨åŠ›å¼•å¯¼å¸ƒå±€
          // åŠ›å¼•å¯¼å¸ƒå±€ç›¸å…³çš„é…ç½®é¡¹.
          // åŠ›å¼•å¯¼å¸ƒå±€æ˜¯æ¨¡æ‹Ÿå¼¹ç°§ç”µè·æ¨¡å‹åœ¨æ¯ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ·»åŠ ä¸€ä¸ªæ–¥åŠ›ï¼Œæ¯æ¡è¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ·»åŠ ä¸€ä¸ªå¼•åŠ›ï¼Œæ¯æ¬¡è¿­ä»£èŠ‚ç‚¹ä¼šåœ¨å„ä¸ªæ–¥åŠ›å’Œå¼•åŠ›çš„ä½œç”¨ä¸‹ç§»åŠ¨ä½ç½®ï¼Œå¤šæ¬¡è¿­ä»£åèŠ‚ç‚¹ä¼šé™æ­¢åœ¨ä¸€ä¸ªå—åŠ›å¹³è¡¡çš„ä½ç½®ï¼Œè¾¾åˆ°æ•´ä¸ªæ¨¡å‹çš„èƒ½é‡æœ€å°åŒ–ã€‚åŠ›å¼•å¯¼å¸ƒå±€çš„ç»“æœæœ‰è‰¯å¥½çš„å¯¹ç§°æ€§å’Œå±€éƒ¨èšåˆæ€§ï¼Œä¹Ÿæ¯”è¾ƒç¾è§‚ã€‚
          force: {
            repulsion: 10000,   // èŠ‚ç‚¹ä¹‹é—´çš„æ–¥åŠ›å› å­ï¼Œå€¼è¶Šå¤§åˆ™æ–¥åŠ›è¶Šå¤§
            gravity: 0.5   // èŠ‚ç‚¹å—åˆ°çš„å‘ä¸­å¿ƒçš„å¼•åŠ›å› å­ï¼Œå€¼è¶Šå¤§èŠ‚ç‚¹è¶Šå¾€ä¸­å¿ƒç‚¹é æ‹¢
          },
          data: nodes,
          links: edges,
          categories: categories,
          roam: true,
          focusNodeAdjacency: true,
          itemStyle: {
            borderColor: '#fff',
            borderWidth: 1,
            shadowBlur: 10,
            shadowColor: 'rgba(0, 0, 0, 0.3)',
          },
          label: {
            position: 'inside',
            color: 'white',
            formatter: '{b}'
          },
          lineStyle: {
            color: 'source',
            curveness: 0.2
          },
          emphasis: {
            lineStyle: {
              width: 10
            }
          }
        }
      }

      // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨
      forceLayout.setOption(forceOption);
    </script>
  </article>
</body>

</html>