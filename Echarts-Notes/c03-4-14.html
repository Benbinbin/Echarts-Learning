<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4.14 日历图</title>
  <script src="js/echarts.js"></script>
  <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
<header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="https://benbinbin.github.io/Echarts-Learning">Echarts Learning</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item ml-lg-2"><a href="https://github.com/Benbinbin/Echarts-Learning"><svg height="100%"
              viewBox="0 0 16 16" version="1.1" width="30">
              <path fill-rule="evenodd"
                d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
              </path>
            </svg></a></li>
      </ul>
    </div>
  </nav>
</header>

  <aside>
    <div class="top">
      <a href="#" target="_self">&lt; top</a>
    </div>
  </aside>

  <article class="container">
    <h1>日历图</h1>
    <hr>
    <h2>基础日历图</h2>
    <div id="calendarChart" style="height:600px"></div>

    <script>
      // 基于准备好的 DOM 初始化 echarts 实例
      var calendarChart = echarts.init(document.getElementById('calendarChart'));
      // 指定图表的配置项和数据
      option = {
        tooltip: {},
        // visualMap 是视觉映射组件，用于进行『视觉编码』，也就是将数据映射到视觉元素（视觉通道）
        visualMap: {
          min: 0,
          max: 10000,
          type: "piecewise",
          orient: "horizontal",
          left: "center",
          top: 20,
          textStyle: {
            color: "black"
          }
        },
        // 日历坐标系组件
        calendar: {
          top: 100,
          // 日历每格框的大小，可设置单值或数组，第一个元素是宽，第二个元素是高
          // 支持设置自适应：auto, 默认为高宽均为20
          cellSize: ["auto", 13],
          // 必填，日历坐标的范围 支持多种格式
          range: "2016",
          // 某一年 range: 2017
          // 某个月 range: '2017-02'
          // 某个区间 range: ['2017-01-02', '2017-02-23']
          // 注意 range: ['2017-01', '2017-02'] 此写法会识别为['2017-01-01', '2017-02-01']
          itemStyle: {
            borderWidth: 0.5
          },
          // 设置日历坐标中星期轴的样式，类似地，有 monthLabel 和 yearLabel 属性
          dayLabel: {
            nameMap: "cn",   //设置星期显示的效果为中文
            firstDay: 1   // 从周一开始
          },
          yearLabel: {
            show: true,
            position: 'bottom'
          }
        },
        series: {
          type: "heatmap",   // 以热力图填充日历组件
          coordinateSystem: "calendar",   // 坐标体系使用日历图
          // 数据是二维数组，每个元素是一个数据点，嵌套数组中第一个元素是时间点（具体到天，可以以字符串形式，或者以时间戳的形式），第二个元素是数值
          data: [
            [1451606400000, 5065],
            [1451692800000, 5242],
            [1451779200000, 1304],
            [1451865600000, 2170],
            [1451952000000, 6673],
            [1452038400000, 8285],
            [1452124800000, 3314],
            [1452211200000, 5109],
            [1452297600000, 9423],
            [1452384000000, 4882],
            [1452470400000, 8095],
            [1452556800000, 3309],
            [1452643200000, 2678],
            [1452729600000, 5624],
            [1452816000000, 5529],
            [1452902400000, 510],
            [1452988800000, 6951],
            [1453075200000, 8744],
            [1453161600000, 5388],
            [1453248000000, 5217],
            [1453334400000, 3671],
            [1453420800000, 3402],
            [1453507200000, 3439],
            [1453593600000, 1617],
            [1453680000000, 1792],
            [1453766400000, 3778],
            [1453852800000, 9548],
            [1453939200000, 9563],
            [1454025600000, 6057],
            [1454112000000, 1266],
            [1454198400000, 2637],
            [1454284800000, 8944],
            [1454371200000, 8795],
            [1454457600000, 1340],
            [1454544000000, 4336],
            [1454630400000, 5593],
            [1454716800000, 8080],
            [1454803200000, 1226],
            [1454889600000, 937],
            [1454976000000, 6487],
            [1455062400000, 6505],
            [1455148800000, 9773],
            [1455235200000, 4441],
            [1455321600000, 9568],
            [1455408000000, 694],
            [1455494400000, 5816],
            [1455580800000, 4277],
            [1455667200000, 5725],
            [1455753600000, 9747],
            [1455840000000, 224],
            [1455926400000, 1199],
            [1456012800000, 7460],
            [1456099200000, 3865],
            [1456185600000, 1076],
            [1456272000000, 3396],
            [1456358400000, 4271],
            [1456444800000, 6560],
            [1456531200000, 2170],
            [1456617600000, 765],
            [1456704000000, 482],
            [1456790400000, 7719],
            [1456876800000, 5740],
            [1456963200000, 7657],
            [1457049600000, 3201],
            [1457136000000, 8516],
            [1457222400000, 9163],
            [1457308800000, 8070],
            [1457395200000, 1577],
            [1457481600000, 9989],
            [1457568000000, 9993],
            [1457654400000, 5309],
            [1457740800000, 5226],
            [1457827200000, 632],
            [1457913600000, 6801],
            [1458000000000, 6880],
            [1458086400000, 984],
            [1458172800000, 7257],
            [1458259200000, 4467],
            [1458345600000, 8302],
            [1458432000000, 2166],
            [1458518400000, 8729],
            [1458604800000, 9558],
            [1458691200000, 7706],
            [1458777600000, 1248],
            [1458864000000, 1660],
            [1458950400000, 8309],
            [1459036800000, 9823],
            [1459123200000, 4140],
            [1459209600000, 1235],
            [1459296000000, 4803],
            [1459382400000, 3758],
            [1459468800000, 6517],
            [1459555200000, 359],
            [1459641600000, 1085],
            [1459728000000, 2178],
            [1459814400000, 2377],
            [1459900800000, 6269],
            [1459987200000, 4938],
            [1460073600000, 4706],
            [1460160000000, 753],
            [1460246400000, 50],
            [1460332800000, 4030],
            [1460419200000, 5477],
            [1460505600000, 1180],
            [1460592000000, 77],
            [1460678400000, 5823],
            [1460764800000, 6259],
            [1460851200000, 3063],
            [1460937600000, 1936],
            [1461024000000, 1863],
            [1461110400000, 1840],
            [1461196800000, 3528],
            [1461283200000, 4418],
            [1461369600000, 3905],
            [1461456000000, 8365],
            [1461542400000, 4676],
            [1461628800000, 1635],
            [1461715200000, 8830],
            [1461801600000, 8185],
            [1461888000000, 6526],
            [1461974400000, 1563],
            [1462060800000, 707],
            [1462147200000, 8358],
            [1462233600000, 4844],
            [1462320000000, 7348],
            [1462406400000, 8385],
            [1462492800000, 1113],
            [1462579200000, 244],
            [1462665600000, 3660],
            [1462752000000, 6747],
            [1462838400000, 5316],
            [1462924800000, 1074],
            [1463011200000, 1832],
            [1463097600000, 6919],
            [1463184000000, 6147],
            [1463270400000, 6825],
            [1463356800000, 4595],
            [1463443200000, 1934],
            [1463529600000, 532],
            [1463616000000, 2468],
            [1463702400000, 7001],
            [1463788800000, 3652],
            [1463875200000, 9584],
            [1463961600000, 7478],
            [1464048000000, 1830],
            [1464134400000, 9534],
            [1464220800000, 9123],
            [1464307200000, 9499],
            [1464393600000, 7888],
            [1464480000000, 2647],
            [1464566400000, 8459],
            [1464652800000, 5639],
            [1464739200000, 5526],
            [1464825600000, 2333],
            [1464912000000, 6166],
            [1464998400000, 19],
            [1465084800000, 4738],
            [1465171200000, 6002],
            [1465257600000, 787],
            [1465344000000, 1811],
            [1465430400000, 5889],
            [1465516800000, 2947],
            [1465603200000, 9167],
            [1465689600000, 6331],
            [1465776000000, 9746],
            [1465862400000, 8127],
            [1465948800000, 653],
            [1466035200000, 4454],
            [1466121600000, 6506],
            [1466208000000, 3449],
            [1466294400000, 2490],
            [1466380800000, 6924],
            [1466467200000, 2001],
            [1466553600000, 9832],
            [1466640000000, 1956],
            [1466726400000, 518],
            [1466812800000, 5250],
            [1466899200000, 5108],
            [1466985600000, 7763],
            [1467072000000, 6631],
            [1467158400000, 2684],
            [1467244800000, 9806],
            [1467331200000, 5432],
            [1467417600000, 9031],
            [1467504000000, 2971],
            [1467590400000, 5127],
            [1467676800000, 4752],
            [1467763200000, 1550],
            [1467849600000, 266],
            [1467936000000, 4850],
            [1468022400000, 3911],
            [1468108800000, 9830],
            [1468195200000, 3078],
            [1468281600000, 8570],
            [1468368000000, 319],
            [1468454400000, 3909],
            [1468540800000, 4798],
            [1468627200000, 5574],
            [1468713600000, 5744],
            [1468800000000, 3084],
            [1468886400000, 6756],
            [1468972800000, 4396],
            [1469059200000, 2751],
            [1469145600000, 5979],
            [1469232000000, 5145],
            [1469318400000, 1870],
            [1469404800000, 4793],
            [1469491200000, 5521],
            [1469577600000, 1075],
            [1469664000000, 2774],
            [1469750400000, 617],
            [1469836800000, 3539],
            [1469923200000, 5626],
            [1470009600000, 419],
            [1470096000000, 4582],
            [1470182400000, 4032],
            [1470268800000, 2962],
            [1470355200000, 3727],
            [1470441600000, 9383],
            [1470528000000, 4323],
            [1470614400000, 3872],
            [1470700800000, 4577],
            [1470787200000, 1497],
            [1470873600000, 1117],
            [1470960000000, 6760],
            [1471046400000, 1022],
            [1471132800000, 8122],
            [1471219200000, 7621],
            [1471305600000, 5142],
            [1471392000000, 6013],
            [1471478400000, 4308],
            [1471564800000, 4728],
            [1471651200000, 519],
            [1471737600000, 207],
            [1471824000000, 6826],
            [1471910400000, 482],
            [1471996800000, 5468],
            [1472083200000, 8073],
            [1472169600000, 8610],
            [1472256000000, 881],
            [1472342400000, 61],
            [1472428800000, 2081],
            [1472515200000, 9458],
            [1472601600000, 5066],
            [1472688000000, 8142],
            [1472774400000, 1369],
            [1472860800000, 9101],
            [1472947200000, 6833],
            [1473033600000, 4102],
            [1473120000000, 8366],
            [1473206400000, 7444],
            [1473292800000, 6645],
            [1473379200000, 6200],
            [1473465600000, 3314],
            [1473552000000, 962],
            [1473638400000, 9275],
            [1473724800000, 1436],
            [1473811200000, 800],
            [1473897600000, 5261],
            [1473984000000, 1702],
            [1474070400000, 4658],
            [1474156800000, 9962],
            [1474243200000, 7633],
            [1474329600000, 7561],
            [1474416000000, 7774],
            [1474502400000, 963],
            [1474588800000, 9156],
            [1474675200000, 1011],
            [1474761600000, 1020],
            [1474848000000, 5860],
            [1474934400000, 5589],
            [1475020800000, 384],
            [1475107200000, 6728],
            [1475193600000, 7518],
            [1475280000000, 7300],
            [1475366400000, 4753],
            [1475452800000, 4723],
            [1475539200000, 5492],
            [1475625600000, 3933],
            [1475712000000, 5618],
            [1475798400000, 7608],
            [1475884800000, 4282],
            [1475971200000, 9118],
            [1476057600000, 3867],
            [1476144000000, 4775],
            [1476230400000, 6720],
            [1476316800000, 4446],
            [1476403200000, 4062],
            [1476489600000, 8],
            [1476576000000, 8752],
            [1476662400000, 9800],
            [1476748800000, 524],
            [1476835200000, 306],
            [1476921600000, 6632],
            [1477008000000, 8322],
            [1477094400000, 9020],
            [1477180800000, 2428],
            [1477267200000, 8021],
            [1477353600000, 6706],
            [1477440000000, 5399],
            [1477526400000, 3902],
            [1477612800000, 5170],
            [1477699200000, 7041],
            [1477785600000, 5096],
            [1477872000000, 6251],
            [1477958400000, 1447],
            [1478044800000, 1429],
            [1478131200000, 7548],
            [1478217600000, 7095],
            [1478304000000, 8330],
            [1478390400000, 1460],
            [1478476800000, 5154],
            [1478563200000, 5268],
            [1478649600000, 9649],
            [1478736000000, 1736],
            [1478822400000, 1040],
            [1478908800000, 3057],
            [1478995200000, 1138],
            [1479081600000, 9947],
            [1479168000000, 7858],
            [1479254400000, 5922],
            [1479340800000, 8897],
            [1479427200000, 3620],
            [1479513600000, 7172],
            [1479600000000, 3906],
            [1479686400000, 9729],
            [1479772800000, 7219],
            [1479859200000, 6458],
            [1479945600000, 7768],
            [1480032000000, 7093],
            [1480118400000, 5571],
            [1480204800000, 7631],
            [1480291200000, 7941],
            [1480377600000, 5649],
            [1480464000000, 1788],
            [1480550400000, 9937],
            [1480636800000, 2509],
            [1480723200000, 724],
            [1480809600000, 9411],
            [1480896000000, 6449],
            [1480982400000, 8815],
            [1481068800000, 3489],
            [1481155200000, 2756],
            [1481241600000, 8751],
            [1481328000000, 679],
            [1481414400000, 896],
            [1481500800000, 2505],
            [1481587200000, 1089],
            [1481673600000, 1070],
            [1481760000000, 2075],
            [1481846400000, 3575],
            [1481932800000, 9732],
            [1482019200000, 1554],
            [1482105600000, 2945],
            [1482192000000, 274],
            [1482278400000, 7019],
            [1482364800000, 5797],
            [1482451200000, 1430],
            [1482537600000, 3296],
            [1482624000000, 9030],
            [1482710400000, 3847],
            [1482796800000, 5013],
            [1482883200000, 2230],
            [1482969600000, 5642],
            [1483056000000, 4961],
            [1483142400000, 8244]
          ]
        }
      }
      calendarChart.setOption(option, true);
    </script>

    <h2>多系列日历图</h2>
    <div id="calendarChartSeries" style="height:600px"></div>

    <script>
      // 基于准备好的 DOM 初始化 echarts 实例
      var calendarChartSeries = echarts.init(document.getElementById('calendarChartSeries'));
      // （虚拟随机）数据1
      function getVirtulData(year) {
        year = year || '2017';
        var date = +echarts.number.parseDate(year + '-01-01');
        var end = +echarts.number.parseDate((+year + 1) + '-01-01');
        var dayTime = 3600 * 24 * 1000;
        var data = [];
        for (var time = date; time < end; time += dayTime) {
          data.push([
            echarts.format.formatTime('yyyy-MM-dd', time),
            Math.floor(Math.random() * 1000)
          ]);
        }
        console.log(data[data.length - 1]);
        return data;
      }

      // 数据2
      var graphData = [
        [
          1485878400000,
          260
        ],
        [
          1486137600000,
          200
        ],
        [
          1486569600000,
          279
        ],
        [
          1486915200000,
          847
        ],
        [
          1487347200000,
          241
        ],
        [
          1487779200000,
          411
        ],
        [
          1488124800000,
          985
        ]
      ];

      var links = graphData.map(function (item, idx) {
        return {
          source: idx,
          target: idx + 1
        };
      });
      links.pop();

      option = {
        tooltip: {
          position: 'top'
        },
        // 多个视觉映射设置
        visualMap: [{
          min: 0,
          max: 1000,
          calculable: true,
          seriesIndex: [2, 3, 4],
          orient: 'horizontal',
          left: '55%',
          bottom: 20
        }, {
          min: 0,
          max: 1000,
          inRange: {
            color: ['grey'],
            opacity: [0, 0.3]
          },
          controller: {
            inRange: {
              opacity: [0.3, 0.6]
            },
            outOfRange: {
              color: '#ccc'
            }
          },
          seriesIndex: [1],
          orient: 'horizontal',
          left: '10%',
          bottom: 20
        }],
        // 多个日历坐标系组件设置
        calendar: [{
          orient: 'vertical',
          yearLabel: {
            margin: 40
          },
          monthLabel: {
            nameMap: 'cn',
            margin: 20
          },
          dayLabel: {
            firstDay: 1,
            nameMap: 'cn'
          },
          cellSize: 40,
          range: '2017-02'
        },
        {
          orient: 'vertical',
          yearLabel: {
            margin: 40
          },
          monthLabel: {
            margin: 20
          },
          cellSize: 40,
          left: 460,
          range: '2017-01'
        },
        {
          orient: 'vertical',
          yearLabel: {
            margin: 40
          },
          monthLabel: {
            margin: 20
          },
          cellSize: 40,
          top: 350,
          range: '2017-03'
        },
        {
          orient: 'vertical',
          yearLabel: {
            margin: 40
          },
          dayLabel: {
            firstDay: 1,
            nameMap: ['周日', '周一', '周二', '周三', '周四', '周五', '周六']
          },
          monthLabel: {
            nameMap: 'cn',
            margin: 20
          },
          cellSize: 40,
          top: 350,
          left: 460,
          range: '2017-04'
        }],

        series: [
          // 第一个系列
          {
            type: 'graph',
            edgeSymbol: ['none', 'arrow'],
            coordinateSystem: 'calendar',
            links: links,
            symbolSize: 10,
            calendarIndex: 0,   // 对应采用日历坐标系组件设置的索引
            data: graphData
          }, {
            type: 'heatmap',
            coordinateSystem: 'calendar',
            data: getVirtulData(2017)
          },
          // 第二个系列
          {
            type: 'effectScatter',
            coordinateSystem: 'calendar',
            calendarIndex: 1,   // 对应采用日历坐标系组件设置的索引
            symbolSize: function (val) {
              return val[1] / 40;
            },
            data: getVirtulData(2017)
          },
          // 第三个系列
          {
            type: 'scatter',
            coordinateSystem: 'calendar',
            calendarIndex: 2,   // 对应采用日历坐标系组件设置的索引
            symbolSize: function (val) {
              return val[1] / 60;
            },
            data: getVirtulData(2017)
          },
          // 第四个系列
          {
            type: 'heatmap',
            coordinateSystem: 'calendar',
            calendarIndex: 3,   // 对应采用日历坐标系组件设置的索引
            data: getVirtulData(2017)
          }]
      };

      calendarChartSeries.setOption(option, true);
    </script>
  </article>

</body>

</html>